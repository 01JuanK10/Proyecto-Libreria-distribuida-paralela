<div class="libros-container">
    <h2>Gestión de Libros</h2>
  
    <div class="actions">
      <button class="btn agregar" (click)="abrirModalNuevoLibro()">Agregar nuevo libro</button>
      <button class="btn prestamo" (click)="registrarPrestamo()">Registrar préstamo</button>
      <button class="btn devuelto" (click)="marcarDevuelto()">Marcar como devuelto</button>
    </div>
  
    <table class="libros-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Título</th>
          <th>Autor</th>
          <th>Editorial</th>
          <th>Género</th>
          <th>Estado</th>
        </tr>
      </thead>
      <tbody>
        @for (libro of libros; track libro.id) {
          <tr>
            <td>{{ libro.id }}</td>
            <td>{{ libro.titulo }}</td>
            <td>{{ libro.autor }}</td>
            <td>{{ libro.editorial }}</td>
            <td>{{ libro.genero }}</td>
            <td [class.prestado]="libro.prestado" >
              {{ libro.prestado ? 'Prestado' : 'Disponible' }}
            </td>
          </tr>
        }
      </tbody>      
    </table>
  </div>
  
  @if (showModal) {
    <app-modal [isVisible]="showModal" [title]="modalTitle" (cerrar)="showModal = false">
      @switch (accion) {
        @case ('agregar') {
          <form class="form-libro">
            <div class="form-grid">
              <div class="form-group full-width">
                <h3 >Agregar nuevo libro</h3>
              </div>

              <div class="form-group">
                <label for="id">ID del libro</label>
                <input type="text" id="id" [(ngModel)]="nuevoLibro.id" name="id" placeholder="Ej. 101" />
              </div>
    
              <div class="form-group">
                <label for="titulo">Título</label>
                <input type="text" id="titulo" [(ngModel)]="nuevoLibro.titulo" name="titulo" placeholder="Ej. Cien años de soledad" />
              </div>
    
              <div class="form-group">
                <label for="autor">Autor</label>
                <input type="text" id="autor" [(ngModel)]="nuevoLibro.autor" name="autor" placeholder="Ej. Gabriel García Márquez" />
              </div>
    
              <div class="form-group">
                <label for="editorial">Editorial</label>
                <input type="text" id="editorial" [(ngModel)]="nuevoLibro.editorial" name="editorial" placeholder="Ej. Sudamericana" />
              </div>
    
              <div class="form-group full-width">
                <label for="genero">Género</label>
                <input type="text" id="genero" [(ngModel)]="nuevoLibro.genero" name="genero" placeholder="Ej. Realismo mágico" />
              </div>
            </div>
    
            <div class="form-actions">
              <button type="button" class="btn cancelar" (click)="showModal = false">Cancelar</button>
              <button type="button" class="btn confirmar" (click)="confirmarAccion()">Guardar</button>
            </div>
          </form>
        }
      }
    </app-modal>
  }
  